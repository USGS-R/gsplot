---
title: "README"
author: "R"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output:
  html_document:
    # variant: markdown_github
---

##Installation
Currently only available via github. Easiest way to install is to use the `devtools` package:

```{r echo=TRUE, eval=FALSE}
devtools::install_github("USGS-R/gsplot")
```

This package is still very much in development, so the API may change at any time.

[![Build status](https://ci.appveyor.com/api/projects/status/1nt561l271x6xhsw?svg=true)](https://ci.appveyor.com/project/jread-usgs/gsplot)  

[![Build Status](https://travis-ci.org/USGS-R/gsplot.svg)](https://travis-ci.org/USGS-R/gsplot)  

[![Coverage Status](https://coveralls.io/repos/USGS-R/gsplot/badge.svg?branch=master&service=github)](https://coveralls.io/github/USGS-R/gsplot?branch=master)


##Overview
The goal of this package is to simplify plotting in R. This includes improving the basic workflow and using defaults that tend to adhear to USGS style guidelines.

Extra features that are not available in base:

Feature                       | Description                 | 
-------------                 | --------------------------  | 
[Piping](#pipes)              | Using the magrittr pipe, `%>%`, you can easily add features to your plot. |
[Automatic legend](#legend)   | For each plot feature, corresponding legend name can be specified. Eliminates duplication of styles. |
[Error bars](#error)          | Apply error bars to points by specifying the upper and lower offsets. |
[Callouts](#callouts)         | Add a line and label in one call. |
[Axes reversal](#reverse)     | Reverse the axis with by specifying one argument to `axis()`.  |          
[Automatic limits](#limits)   | Automatically regenerate limits of plot when new features are added. |        
[Embedded functions](#embed)  |               |       

```{r table_plots, echo=FALSE, message=FALSE}
library(gsplot)
```

<a name="pipes"></a>

#### Piping

Using the magrittr pipe, `%>%`, you can easily add features to your plot. 

```{r message=FALSE, warning=FALSE}
piping <- gsplot() %>% 
  points(1:3, 2:4) %>%
  lines(1:5, 5:1)
piping
```

<a name="legend"></a>

#### Automatic legend

For each plot feature, the argument `legend.name` can be included in it's function call. Then, the `legend()` function is used to add the legend to your plot object.

```{r message=FALSE, warning=FALSE}
autolegend <- gsplot() %>% 
  points(1:3, 1:3, col = "green", pch = 8, legend.name = "my points") %>% 
  points(1:3, 3:1, col = "red", pch = 20, legend.name = "some other points") %>% 
  lines(1:3, 1:3, legend.name = "some line") %>% 
  legend()
autolegend
```

<a name="error"></a>

#### Error bars

Apply error bars to points by specifying the upper and lower offsets. 

```{r message=FALSE, warning=FALSE}
errorbarsplot <- gsplot() %>% 
  points(4:8, 4:8) %>% 
  error_bar(c(5,7), c(5,7), y.high = c(1,0.5), y.low = c(0.5,1))
errorbarsplot
```

<a name="callouts"></a>

#### Callouts

Add a line and label in one call.

```{r message=FALSE, warning=FALSE}
calloutsplot <- gsplot() %>% 
  points(1:3,1:3) %>% 
  callouts(1:3, 1:3, labels = paste("point", 1:3))
calloutsplot
```

<a name="reverse"></a>

#### Axis reversal

If the axis needs to be reversed, you can add the argument `reverse = TRUE` to the function call.

```{r message=FALSE, warning=FALSE}
axisreversal <- gsplot() %>% 
  title("groundwater level") %>% 
  points(1:5, c(1,7,23,47,31)) %>% 
  axis(side = 2, reverse = TRUE)
axisreversal
```

<a name="limits"></a>

#### Automatic limits

Automatically regenerate limits of plot when new features are added. 

```{r message=FALSE, warning=FALSE}
autolimits <- gsplot() %>% 
  points(1:3,1:3) %>% 
  points(5:6,5:6)
autolimits
```

<a name="embed"></a>

#### Embedded functions

```{r message=FALSE, warning=FALSE}

```

#### 

```{r message=FALSE, warning=FALSE}

```

##Improved workflow examples

```{r echo=TRUE, warning=FALSE, message=FALSE}
library(gsplot)

demoPlot <- gsplot() %>%
  points(y=c(3,1,2), x=1:3, xlim=c(0,NA),ylim=c(0,NA),
         col="blue", pch=18, legend.name="Points", xlab="Index") %>%
  lines(c(3,4,3), c(2,4,6), legend.name="Lines", ylab=expression(paste("Data [ft"^"3","/s]"))) %>%
  abline(b=1, a=0, legend.name="1:1") %>%
  axis(side=c(3,4), labels=FALSE) %>%
  legend(location="topleft",title="Awesome!") %>%
  grid() %>%
  error_bar(x=1:3, y=c(3,1,2), y.high=c(0.5,0.25,1), y.low=0.1) %>%
  error_bar(x=1:3, y=c(3,1,2), x.low=.2, x.high=.2, col="red",lwd=3) %>%
  callouts(x=1, y=2.8, lwd=2, angle=250, labels="Weird data") %>%
  title("Graphing Fun")
demoPlot
```

```{r echo=TRUE, warning=FALSE, message=FALSE}
gs <- gsplot() %>%
  points(y=c(3,1,2,4,5), x=c(1:3,8,80), 
         col="blue", pch=18, legend.name="Points") %>%
  lines(c(3,4,3), c(2,4,6), legend.name="Lines", 
        ylab="logged y axis", xlab="logged x axis", log='xy') %>%
  callouts(x=8, y=4, lwd=2, angle=45, labels="Not sure about this one") %>%
  title("logged axes") %>%
  axis(side=c(1,2,3,4), labels=FALSE, n.minor=4) %>%
  axis(side=c(1,2))
gs
```

```{r echo=TRUE, warning=FALSE, message=FALSE}
usrDef <- gsplot(mar=c(4,4,4,4), xaxs='r', yaxs='r') %>% 
     points(x=1, y=2, side=c(3,2), legend.name="Points 1", cex=3, xlab='cat') %>% 
     points(x=3, y=4, side=c(1,4), legend.name="Points 2", pch=5, col="red", ylab=expression(paste("Discharge in ",ft^3/s))) %>% 
     lines(x=c(3,4,3), y=c(2,4,6), legend.name="Lines 1", lty=5, col="orange") %>%
     lines(x=c(1,2,5), y=c(1,8,5), legend.name="Lines 2", lwd=3, ylab='Science!', xlab='dogs') %>%  
     legend(x=1.5,y=4)
usrDef
```

##Disclaimer
This software is in the public domain because it contains materials that originally came from the U.S. Geological Survey, an agency of the United States Department of Interior. For more information, see the [official USGS copyright policy](http://www.usgs.gov/visual-id/credit_usgs.html#copyright/ "official USGS copyright policy")

Although this software program has been used by the U.S. Geological Survey (USGS), no warranty, expressed or implied, is made by the USGS or the U.S. Government as to the accuracy and functioning of the program and related program material nor shall the fact of distribution constitute any such warranty, and no responsibility is assumed by the USGS in connection therewith.

This software is provided "AS IS."

 [
    ![CC0](http://i.creativecommons.org/p/zero/1.0/88x31.png)
  ](http://creativecommons.org/publicdomain/zero/1.0/)
